---
import Layout from "../layouts/Layout.astro";
import DestacadosHomeIsland from "../components/DestacadosHomeIsland.tsx";
import GoogleAdIsland from "../components/GoogleAdIsland.tsx";

const SITE = "https://enmipueblo.com";

const jsonLd = {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": `${SITE}#website`,
      url: SITE,
      name: "EnMiPueblo",
      inLanguage: "es-ES",
      potentialAction: {
        "@type": "SearchAction",
        target: `${SITE}/buscar?texto={search_term_string}`,
        "query-input": "required name=search_term_string",
      },
    },
    {
      "@type": "Organization",
      "@id": `${SITE}#org`,
      name: "EnMiPueblo",
      url: SITE,
      logo: `${SITE}/brand/logo-web.png`,
    },
  ],
};

const populares = [
  { label: "Fontaneros", emoji: "üõ†Ô∏è", href: "/buscar?texto=Fontaneros" },
  { label: "Electricistas", emoji: "‚ö°", href: "/buscar?texto=Electricistas" },
  { label: "Modistas", emoji: "üßµ", href: "/buscar?texto=Modistas" },
  { label: "Jardineros", emoji: "üåø", href: "/buscar?texto=Jardineros" },
  { label: "Profesores", emoji: "üí°", href: "/buscar?texto=Profesores" },
];
---

<Layout
  title="EnMiPueblo - Encuentra servicios en tu pueblo"
  description="Busca, ofrece y encuentra servicios locales en tu pueblo. Profesionales cerca de ti: fontaneros, electricistas, modistas, jardineros, profesores y m√°s."
>
  <script type="application/ld+json" is:inline>
    {JSON.stringify(jsonLd)}
  </script>

  <main class="mx-auto max-w-6xl px-4 pb-14">
    <section class="pt-6">
      <div class="rounded-[32px] border shadow-[0_18px_50px_-42px_rgba(0,0,0,0.35)]" style="background: var(--sb-card); border-color: var(--sb-border);">
        <div class="p-6 sm:p-8">
          <div class="grid grid-cols-1 lg:grid-cols-[1.05fr_0.95fr] gap-8 items-center">
            <div>
              <h1 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold leading-tight" style="color: var(--sb-ink);">
                Busca, ofrece o<br />encuentra servicios<br />en tu pueblo
              </h1>

              <form action="/buscar" method="get" class="mt-5">
                <div class="flex w-full max-w-2xl overflow-hidden rounded-2xl border bg-white shadow-sm" style="border-color: var(--sb-border);">
                  <input
                    type="text"
                    name="texto"
                    placeholder="¬øQu√© necesitas? (fontanero, modista, profesor‚Ä¶)"
                    class="h-12 flex-1 px-4 text-base outline-none"
                  />
                  <button
                    type="submit"
                    class="h-12 px-5 font-extrabold"
                    style="background: var(--sb-accent); color: white;"
                  >
                    Buscar
                  </button>
                </div>
              </form>

              <div class="mt-4 flex flex-wrap gap-2">
                <a
                  href="/buscar"
                  class="inline-flex items-center gap-2 rounded-full border bg-white/70 px-4 py-2 text-sm font-semibold shadow-sm hover:bg-white"
                  style="border-color: var(--sb-border); color: var(--sb-ink);"
                >
                  Explorar servicios
                </a>
                <a
                  href="/ofrecer"
                  class="inline-flex items-center gap-2 rounded-full border bg-white/70 px-4 py-2 text-sm font-semibold shadow-sm hover:bg-white"
                  style="border-color: var(--sb-border); color: var(--sb-ink);"
                >
                  Ofrecer un servicio
                </a>
              </div>
            </div>

            <div class="relative">
              <div
                class="relative overflow-hidden rounded-3xl border"
                style="border-color: var(--sb-border); background: rgba(255,255,255,0.65);"
              >
                <div class="absolute inset-0">
                  <img
                    src="/brand/hero.jpg"
                    alt=""
                    class="h-full w-full object-cover object-right"
                    loading="eager"
                  />
                  <div class="absolute inset-0" style="background: linear-gradient(90deg, rgba(255,255,255,0.92) 0%, rgba(255,255,255,0.66) 45%, rgba(255,255,255,0.00) 78%);"></div>
                </div>

                <div class="relative p-6 sm:p-8">
                  <div class="max-w-[62%]">
                    <div class="text-xs font-extrabold uppercase tracking-wide" style="color: var(--sb-ink2);">En tu zona</div>
                    <div class="mt-2 text-sm" style="color: var(--sb-ink2);">
                      Encuentra profesionales cerca, contacta en un clic y guarda favoritos.
                    </div>
                  </div>
                  <div class="h-[210px] sm:h-[240px]"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-8">
            <h2 class="text-center text-2xl sm:text-3xl font-extrabold" style="color: var(--sb-ink);">Lo m√°s buscado</h2>

            <div class="mt-5 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4">
              {populares.map((c) => (
                <a
                  href={c.href}
                  class="group rounded-2xl border bg-white/70 p-4 text-center shadow-sm hover:bg-white"
                  style="border-color: var(--sb-border);"
                >
                  <div class="mx-auto grid h-12 w-12 place-items-center rounded-2xl border bg-white" style="border-color: var(--sb-border);">
                    <span class="text-2xl" aria-hidden="true">{c.emoji}</span>
                  </div>
                  <div class="mt-3 text-sm font-extrabold" style="color: var(--sb-ink);">{c.label}</div>
                </a>
              ))}
            </div>
          </div>

          <div class="mt-8">
            <GoogleAdIsland client:load className="" minHeight={140} title="Publicidad" />
          </div>

          <div class="mt-10">
            <h2 class="text-2xl sm:text-3xl font-extrabold" style="color: var(--sb-ink);">Destacados en tu zona</h2>
            <p class="mt-1 text-sm" style="color: var(--sb-ink2);">Servicios seleccionados para ayudarte a encontrar r√°pido.</p>

            <DestacadosHomeIsland client:load />
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>
